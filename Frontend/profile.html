<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doctor Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
  
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc;
        color: #1e293b;
        line-height: 1.6;
      }
  
      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 24px;
      }
  
      /* Header */
      .header {
        background-color:  #E6F0FA ;
        border-radius: 16px;
        padding: 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease;
      }
  .header:hover {
    transform: translateY(-2px);
  }

  .profile {
    display: flex;
    gap: 16px;
    align-items: center;
  }

  .profile-pic {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    border: 3px solid #ffffff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .profile-info h1 {
    font-size: 24px;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 4px;
  }

  .profile-info p {
    font-size: 14px;
    color: #475569;
    margin: 2px 0;
  }
    .contact-info {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-top: 8px;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 14px;
      color: #000;
    }

    .contact-item i {
      color: #048581;
    }


    .stats {
      display: flex;
      gap: 15px;
    }

    .stat-card {
      background: white;
      border-radius: 8px;
      padding: 12px;
      width: 100px;
      height: 80px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .stat-icon {
      margin: 0 auto 4px;
      color: #048581;
    }

    .stat-value {
      font-weight: 700;
      font-size: 24px;
      color: #353535;
    }

    .stat-label {
      font-size: 14px;
      color: #000;
    }

    .nav {
      margin-top: 24px;
    }

    .nav ul {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      list-style: none;
    }

    .nav-button {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
      color: #353535;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .nav-button.active {
      background: white;
    }

    .nav-button:not(.active) {
      background: #048581;
      color: white;
    }

    .nav-button:not(.active):hover {
      background: #036b68;
    }

    .schedule-grid {
      display: grid;
      grid-template-columns: 60px repeat(5, 1fr);
      gap: 1px;
      background: #353535;
      transition: all 0.3s ease;
    }

    .schedule-grid.day-view {
      grid-template-columns: 60px 1fr;
    }

    .time-label {
      background: white;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 8px;
      font-size: 12px;
      color: #000;
    }

    .day-column {
      background: white;
      display: block;
    }

    .schedule-grid.day-view .day-column {
      display: none;
    }

    .schedule-grid.day-view .day-column.active {
      display: block;
    }

    .day-header {
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
      color: #000;
    }

    .time-slot {
      height: 60px;
      position: relative;
    }

    .appointment-block {
      position: absolute;
      left: 4px;
      right: 4px;
      top: 4px;
      bottom: 4px;
      padding: 8px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      background: #6ecef2;
      color: rgb(52, 52, 52);
      transition: opacity 0.2s;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .appointment-block.not-accepted {
      background: yellow;
    }

    .appointment-block:hover {
      opacity: 1;
    }

    .appointment-block:hover .tooltip {
      display: block;
    }

    .tooltip {
      display: none;
      position: absolute;
      top: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      border: 1px solid #353535;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 10;
      width: 200px;
      color: #000;
      font-size: 14px;
    }

    .tooltip p {
      margin: 4px 0;
    }

    .tooltip-buttons {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .tooltip-btn {
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tooltip-btn.accept {
      background: #048581;
      color: white;
    }

    .tooltip-btn.accept:hover {
      background: #036b68;
    }

    .tooltip-btn.reject {
      background: #353535;
      color: white;
    }

    .tooltip-btn.reject:hover {
      background: #2a2a2a;
    }

    .tooltip-btn.edit {
      background: #000;
      color: white;
    }

    .tooltip-btn.edit:hover {
      background: #1a1a1a;
    }

    .tooltip-btn.cancel {
      background: #353535;
      color: white;
    }

    .tooltip-btn.cancel:hover {
      background: #2a2a2a;
    }

    .schedule-button {
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 20px;
      font-weight: 500;
      transition: all 0.2s;
    }

    .schedule-button.active {
      background: #048581;
      color: white;
    }

    .schedule-button:not(.active) {
      background: white;
      color: #353535;
      border: 1px solid #353535;
    }

    .schedule-button:not(.active):hover {
      background: #f0f0f0;
    }

    .notification {
      position: relative;
      padding: 12px 0;
    }

    .notification-date {
      position: absolute;
      right: 0;
      top: 12px;
      color: #353535;
    }

    .notification-title {
      color: #353535;
    }

    .notification-description {
      color: #000;
    }

    .view-all {
      color: #048581;
    }

    .view-all:hover {
      color: #036b68;
    }

    .section-title {
      color: #353535;
    }

    .semester-text {
      color: #000;
    }

    .schedule-title, .schedule-date {
      color: #353535;
    }

    .patients-table-container {
      display: none;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .patients-table-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .search-bar {
      padding: 8px;
      border: 1px solid #353535;
      border-radius: 8px;
      font-size: 14px;
      color: #000;
      width: 200px;
    }

    .sort-btn {
      padding: 8px 16px;
      border-radius: 16px;
      font-size: 14px;
      font-weight: 500;
      background: #048581;
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .sort-btn:hover {
      background: #036b68;
    }

    .patients-table {
      width: 100%;
      border-collapse: collapse;
    }

    .patients-table th,
    .patients-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #353535;
      color: #000;
    }

    .patients-table th {
      background: #E6F0FA;
      font-weight: 700;
      font-size: 14px;
    }

    .patients-table td {
      font-size: 14px;
    }

    .toggle-appointments-btn {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
      background: #048581;
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .toggle-appointments-btn:hover {
      background: #036b68;
    }

    .appointments-list {
      display: none;
      padding: 12px;
      background: #f9f9f9;
      border: 1px solid #353535;
      border-radius: 8px;
      margin-top: 8px;
    }

    .appointments-list.visible {
      display: block;
    }

    .appointment-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #353535;
      font-size: 14px;
      color: #000;
    }

    .appointment-item:last-child {
      border-bottom: none;
    }

    .appointment-actions {
      display: flex;
      gap: 8px;
    }

    .appointment-btn {
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .appointment-btn.accept {
      background: #048581;
      color: white;
    }

    .appointment-btn.accept:hover {
      background: #036b68;
    }

    .appointment-btn.reject {
      background: #353535;
      color: white;
    }

    .appointment-btn.reject:hover {
      background: #2a2a2a;
    }

    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 16px;
    }

    .pagination-btn {
      padding: 8px 16px;
      border-radius: 16px;
      font-size: 14px;
      font-weight: 500;
      border: 1px solid #353535;
      background: white;
      color: #353535;
      cursor: pointer;
      transition: all 0.2s;
    }

    .pagination-btn.active {
      background: #048581;
      color: white;
      border: none;
    }

    .pagination-btn:hover:not(.active) {
      background: #f0f0f0;
    }
  </style>
</head>
<body >
    <div class="container">
    <header class="header">
        <div class="profile">
            <img 
              src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?auto=format&fit=crop&q=80&w=150&h=150"
              alt="Dean Guerrero"
              class="profile-pic"
            />
            <button class="text-blue-600 hover:text-blue-800 p-2 rounded-full transition-colors duration-200 " aria-label="Edit">
                <i data-lucide="pencil" class="w-5 h-5"></i>
              </button>
              
              <!-- Ajouter ce style pour l'effet au survol -->
              <style>
                .edit-btn {
                  transition: all 0.2s ease;
                }
                
                .edit-btn:hover {
                  background-color: #E6F0FA;
                  transform: scale(1.1);
                }
                
                .edit-btn:active {
                  transform: scale(0.95);
                }
              </style>
            <div class="profile-info">
              <h1>Dean Guerrero</h1>
              <div class="contact-info">
                <div class="contact-item">
                  <i data-lucide="award" class="w-4 h-4"></i>
                  <span>A+</span>
                  <i data-lucide="calendar" class="w-4 h-4 ml-2"></i>
                  <span>Joined: January 2025</span>
                </div>
                <div class="contact-item">
                  <i data-lucide="mail" class="w-4 h-4"></i>
                  <span>dean.guerrero@email.com</span>
                </div>
                <div class="contact-item">
                  <i data-lucide="phone" class="w-4 h-4"></i>
                  <span>+1 543 235 64</span>
                </div>
              </div>
            </div>
        </div>
            <div class="stats flex gap-4">
                <div class="stat-card rounded-lg p-4 text-center shadow-md">
                  <i data-lucide="calendar" class="stat-icon w-4 h-4 mx-auto mb-2"></i>
                  <div class="stat-value font-bold text-xl">25</div>
                  <div class="stat-label text-sm">Appointments</div>
                </div>
                <div class="stat-card rounded-lg p-4 text-center shadow-md">
                  <i data-lucide="users" class="stat-icon w-4 h-4 mx-auto mb-2"></i>
                  <div class="stat-value font-bold text-xl">48</div>
                  <div class="stat-label text-sm">Patients</div>
                </div>
              </div> 
        
        <nav class="nav mt-6">
            <ul class="flex gap-2 justify-end flex-wrap">
              <li><button class="nav-button active px-4 py-2 rounded-full font-medium shadow-sm transition-all duration-200" data-view="schedule">Schedule</button></li>
              <li><button class="nav-button px-4 py-2 rounded-full font-medium transition-all duration-200" data-view="patients">Patients</button></li>
            </ul>
          </nav>
        </div>
      </header>
  <main class="main max-w-7xl mx-auto p-6 grid grid-cols-1 lg:grid-cols-5 gap-6">
    <section class="schedule col-span-1 lg:col-span-3 bg-white rounded-xl p-6 shadow-md" id="scheduleView">
      <div class="schedule-header flex justify-between items-center mb-6">
        <h2 class="schedule-title text-lg font-bold">Doctor's Schedule</h2>
        <div class="flex items-center gap-4">
          <span class="schedule-date">March 30 – April 3</span>
          <div class="schedule-buttons flex gap-2">
            <button class="schedule-button active">Work Week</button>
            <button class="schedule-button">Day</button>
          </div>
        </div>
      </div>

      <div class="schedule-grid">
        <div>
          <div class="time-label h-10"></div>
          <div class="time-label">8:00 AM</div>
          <div class="time-label">9:00 AM</div>
          <div class="time-label">10:00 AM</div>
          <div class="time-label">11:00 AM</div>
          <div class="time-label">12:00 PM</div>
          <div class="time-label">1:00 PM</div>
          <div class="time-label">2:00 PM</div>
          <div class="time-label">3:00 PM</div>
          <div class="time-label">4:00 PM</div>
        </div>

        <div class="day-column monday">
          <div class="day-header">Monday</div>
          <div id="monday" class="time-slots"></div>
        </div>
        <div class="day-column tuesday">
          <div class="day-header">Tuesday</div>
          <div id="tuesday" class="time-slots"></div>
        </div>
        <div class="day-column wednesday">
          <div class="day-header">Wednesday</div>
          <div id="wednesday" class="time-slots"></div>
        </div>
        <div class="day-column thursday">
          <div class="day-header">Thursday</div>
          <div id="thursday" class="time-slots"></div>
        </div>
        <div class="day-column friday">
          <div class="day-header">Friday</div>
          <div id="friday" class="time-slots"></div>
        </div>
      </div>
    </section>

    <section class="patients-table-container col-span-1 lg:col-span-3" id="patientsView">
      <div class="patients-table-header">
        <input type="text" class="search-bar" placeholder="Search by name..." />
        <button class="sort-btn" id="sortBtn">Sort by Pending Status</button>
      </div>
      <table class="patients-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Appointments</th>
            <th>Pending?</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="patientsTableBody"></tbody>
      </table>
      <div class="pagination" id="pagination"></div>
    </section>

    <div class="right-column col-span-1 lg:col-span-2 flex flex-col gap-6">
      <section class="performance bg-white rounded-xl p-6 shadow-md">
        <h2 class="section-title text-lg font-bold mb-4">Hours <span class=" text-center text-sm">/day</span></h2>
        <canvas id="performanceChart" class="w-32 h-32 mx-auto">  </canvas>
      </section>

      <section class="notifications bg-white rounded-xl p-6 shadow-md flex-grow">
        <div class="notifications-header flex justify-between items-center mb-4">
          <h2 class="section-title text-lg font-bold">Notifications</h2>
          <button class="view-all flex items-center gap-1 text-sm font-medium transition-all duration-200">
            View All
          </button>
        </div>
        
        <div class="notification border-b py-3" style="border-color: #353535;">
          <div class="notification-header flex justify-between items-start">
            <h3 class="notification-title font-medium">New Patient Request</h3>
            <span class="notification-date text-xs">2025-03-29</span>
          </div>
          <p class="notification-description text-sm mt-1">
            John Doe has requested an appointment for a check-up.
          </p>
        </div>

        <div class="notification border-b py-3" style="border-color: #353535;">
          <div class="notification-header flex justify-between items-start">
            <h3 class="notification-title font-medium">Reminder: Surgery</h3>
            <span class="notification-date text-xs">2025-03-30</span>
          </div>
          <p class="notification-description text-sm mt-1">
            Scheduled surgery for Michael Brown at 2:00 PM.
          </p>
        </div>

        <div class="notification py-3">
          <div class="notification-header flex justify-between items-start">
            <h3 class="notification-title font-medium">Staff Meeting</h3>
            <span class="notification-date text-xs">2025-04-01</span>
          </div>
          <p class="notification-description text-sm mt-1">
            Staff meeting scheduled at 9:00 AM to discuss new protocols.
          </p>
        </div>
      </section>
    </div>
  </main>
</div>
  <script>
    lucide.createIcons();

    const ctx = document.getElementById('performanceChart').getContext('2d');
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        datasets: [{
          data: [8.5, 1.5],
          backgroundColor: ['#048581', 'white'],
          borderWidth: 0,
          circumference: 180,
          rotation: 270
        }]
      },
      options: {
        cutout: '70%',
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
          title: {
            display: true,
            text: '8.5 of 10',
            position: 'bottom',
            font: { family: 'Roboto', size: 16, weight: 700 },
            color: '#353535'
          }
        }
      }
    });

    const schedule = {
      monday: [
        { time: '8:00 AM', patient: 'John Doe', reason: 'Check-up', phone: '+1 123 456 7890', notes: 'First visit', accepted: false },
        { time: '9:00 AM', patient: 'Sarah Smith', reason: 'Consultation', phone: '+1 234 567 8901', notes: 'Heart concerns', accepted: true },
        { time: '10:00 AM', patient: 'Michael Brown', reason: 'Follow-up', phone: '+1 345 678 9012', notes: 'Post-surgery', accepted: true },
        { time: '1:00 PM', patient: 'Emily Johnson', reason: 'Check-up', phone: '+1 456 789 0123', notes: 'Routine', accepted: false },
        { time: '2:00 PM', patient: 'David Lee', reason: 'Surgery Prep', phone: '+1 567 890 1234', notes: 'Scheduled for next week', accepted: true }
      ],
      tuesday: [
        { time: '8:00 AM', patient: 'Anna Taylor', reason: 'Check-up', phone: '+1 678 901 2345', notes: 'Annual visit', accepted: true },
        { time: '9:00 AM', patient: 'James Wilson', reason: 'Consultation', phone: '+1 789 012 3456', notes: 'Chest pain', accepted: false },
        { time: '10:00 AM', patient: 'Laura Adams', reason: 'Follow-up', phone: '+1 890 123 4567', notes: 'Post-treatment', accepted: true },
        { time: '11:00 AM', patient: 'Robert King', reason: 'Check-up', phone: '+1 901 234 5678', notes: 'Routine', accepted: true },
        { time: '2:00 PM', patient: 'Sophie Clark', reason: 'Consultation', phone: '+1 012 345 6789', notes: 'Blood pressure concerns', accepted: false }
      ],
      wednesday: [
        { time: '9:00 AM', patient: 'Emma Davis', reason: 'Check-up', phone: '+1 123 456 7890', notes: 'Routine', accepted: true },
        { time: '10:00 AM', patient: 'Mark Evans', reason: 'Follow-up', phone: '+1 234 567 8901', notes: 'Post-surgery', accepted: false },
        { time: '11:00 AM', patient: 'Lisa Harris', reason: 'Consultation', phone: '+1 345 678 9012', notes: 'Fatigue issues', accepted: true }
      ],
      thursday: [
        { time: '8:00 AM', patient: 'Tom Walker', reason: 'Check-up', phone: '+1 456 789 0123', notes: 'Annual visit', accepted: true },
        { time: '9:00 AM', patient: 'Grace Lewis', reason: 'Consultation', phone: '+1 567 890 1234', notes: 'Heart concerns', accepted: false },
        { time: '10:00 AM', patient: 'Henry Moore', reason: 'Follow-up', phone: '+1 678 901 2345', notes: 'Post-treatment', accepted: true },
        { time: '1:00 PM', patient: 'Olivia Scott', reason: 'Check-up', phone: '+1 789 012 3456', notes: 'Routine', accepted: true },
        { time: '2:00 PM', patient: 'Jack Turner', reason: 'Surgery Prep', phone: '+1 890 123 4567', notes: 'Scheduled for next week', accepted: false }
      ],
      friday: [
        { time: '8:00 AM', patient: 'Mia White', reason: 'Check-up', phone: '+1 901 234 5678', notes: 'Routine', accepted: true },
        { time: '11:00 AM', patient: 'Ethan Hall', reason: 'Consultation', phone: '+1 012 345 6789', notes: 'Chest pain', accepted: false },
        { time: '2:00 PM', patient: 'Ava Green', reason: 'Follow-up', phone: '+1 123 456 7890', notes: 'Post-treatment', accepted: true }
      ]
    };

    const patients = [
      { name: 'John Doe', email: 'john.doe@example.com', phone: '+1 123 456 7890' },
      { name: 'Sarah Smith', email: 'sarah.smith@example.com', phone: '+1 234 567 8901' },
      { name: 'Michael Brown', email: 'michael.brown@example.com', phone: '+1 345 678 9012' },
      { name: 'Emily Johnson', email: 'emily.johnson@example.com', phone: '+1 456 789 0123' },
      { name: 'David Lee', email: 'david.lee@example.com', phone: '+1 567 890 1234' },
      { name: 'Anna Taylor', email: 'anna.taylor@example.com', phone: '+1 678 901 2345' },
      { name: 'James Wilson', email: 'james.wilson@example.com', phone: '+1 789 012 3456' },
      { name: 'Laura Adams', email: 'laura.adams@example.com', phone: '+1 890 123 4567' },
      { name: 'Robert King', email: 'robert.king@example.com', phone: '+1 901 234 5678' },
      { name: 'Sophie Clark', email: 'sophie.clark@example.com', phone: '+1 012 345 6789' },
      { name: 'Emma Davis', email: 'emma.davis@example.com', phone: '+1 123 456 7890' },
      { name: 'Mark Evans', email: 'mark.evans@example.com', phone: '+1 234 567 8901' },
      { name: 'Lisa Harris', email: 'lisa.harris@example.com', phone: '+1 345 678 9012' },
      { name: 'Tom Walker', email: 'tom.walker@example.com', phone: '+1 456 789 0123' },
      { name: 'Grace Lewis', email: 'grace.lewis@example.com', phone: '+1 567 890 1234' },
      { name: 'Henry Moore', email: 'henry.moore@example.com', phone: '+1 678 901 2345' },
      { name: 'Olivia Scott', email: 'olivia.scott@example.com', phone: '+1 789 012 3456' },
      { name: 'Jack Turner', email: 'jack.turner@example.com', phone: '+1 890 123 4567' },
      { name: 'Mia White', email: 'mia.white@example.com', phone: '+1 901 234 5678' },
      { name: 'Ethan Hall', email: 'ethan.hall@example.com', phone: '+1 012 345 6789' },
      { name: 'Ava Green', email: 'ava.green@example.com', phone: '+1 123 456 7890' }
    ];

    Object.entries(schedule).forEach(([day, appointments]) => {
      const dayElement = document.getElementById(day);
      if (!dayElement) return;

      for (let i = 0; i < 8; i++) {
        const timeSlot = document.createElement('div');
        timeSlot.className = 'time-slot';
        dayElement.appendChild(timeSlot);
      }

      appointments.forEach(appointment => {
        const hour = appointment.time;
        const index = ['8:00 AM', '9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM', '3:00 PM', '4:00 PM'].indexOf(hour);
        if (index >= 0 && index < 8) {
          const appointmentBlock = document.createElement('div');
          appointmentBlock.className = 'appointment-block';
          if (!appointment.accepted) appointmentBlock.classList.add('not-accepted');
          appointmentBlock.textContent = `${appointment.patient} – ${appointment.reason}`;
          appointmentBlock.dataset.appointment = JSON.stringify(appointment);

          const tooltip = document.createElement('div');
          tooltip.className = 'tooltip';
          tooltip.innerHTML = `
            <p><strong>Patient:</strong> ${appointment.patient}</p>
            <p><strong>Reason:</strong> ${appointment.reason}</p>
            <p><strong>Phone:</strong> ${appointment.phone}</p>
            <p><strong>Notes:</strong> ${appointment.notes}</p>
            <div class="tooltip-buttons">
              ${!appointment.accepted ? `
                <button class="tooltip-btn accept">Accept</button>
                <button class="tooltip-btn reject">Reject</button>
              ` : `
                <button class="tooltip-btn edit">Modify Date</button>
                <button class="tooltip-btn cancel">Cancel</button>
              `}
            </div>
          `;
          appointmentBlock.appendChild(tooltip);
          dayElement.children[index].appendChild(appointmentBlock);
        }
      });
    });

    const scheduleView = document.getElementById('scheduleView');
    const patientsView = document.getElementById('patientsView');
    document.querySelectorAll('.nav-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelector('.nav-button.active').classList.remove('active');
        button.classList.add('active');
        if (button.dataset.view === 'schedule') {
          scheduleView.style.display = 'block';
          patientsView.style.display = 'none';
        } else if (button.dataset.view === 'patients') {
          scheduleView.style.display = 'none';
          patientsView.style.display = 'block';
          renderPatientsTable();
        }
      });
    });

    const scheduleGrid = document.querySelector('.schedule-grid');
    const dayColumns = document.querySelectorAll('.day-column');
    let currentDayIndex = 0;

    document.querySelectorAll('.schedule-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelector('.schedule-button.active').classList.remove('active');
        button.classList.add('active');
        if (button.textContent === 'Day') {
          scheduleGrid.classList.add('day-view');
          dayColumns.forEach(col => col.classList.remove('active'));
          dayColumns[currentDayIndex].classList.add('active');
        } else {
          scheduleGrid.classList.remove('day-view');
          dayColumns.forEach(col => col.classList.remove('active'));
        }
      });
    });

    dayColumns.forEach((column, index) => {
      column.querySelector('.day-header').addEventListener('click', () => {
        if (scheduleGrid.classList.contains('day-view')) {
          currentDayIndex = index;
          dayColumns.forEach(col => col.classList.remove('active'));
          dayColumns[currentDayIndex].classList.add('active');
        }
      });
    });

    document.querySelectorAll('.appointment-block').forEach(block => {
      const appointment = JSON.parse(block.dataset.appointment);
      if (!appointment.accepted) {
        const acceptBtn = block.querySelector('.tooltip-btn.accept');
        const rejectBtn = block.querySelector('.tooltip-btn.reject');
        acceptBtn.addEventListener('click', () => {
          appointment.accepted = true;
          block.dataset.appointment = JSON.stringify(appointment);
          block.classList.remove('not-accepted');
          const tooltip = block.querySelector('.tooltip');
          tooltip.innerHTML = `
            <p><strong>Patient:</strong> ${appointment.patient}</p>
            <p><strong>Reason:</strong> ${appointment.reason}</p>
            <p><strong>Phone:</strong> ${appointment.phone}</p>
            <p><strong>Notes:</strong> ${appointment.notes}</p>
            <div class="tooltip-buttons">
              <button class="tooltip-btn edit">Modify Date</button>
              <button class="tooltip-btn cancel">Cancel</button>
            </div>
          `;
          attachEditCancelListeners(block);
          renderPatientsTable();
        });
        rejectBtn.addEventListener('click', () => {
          const patient = block.textContent.split(' – ')[0];
          if (confirm(`Are you sure you want to reject ${patient}'s appointment?`)) {
            block.remove();
            updatePatientAppointments(patient, 'rejected');
            renderPatientsTable();
          }
        });
      } else {
        attachEditCancelListeners(block);
      }
    });

    function attachEditCancelListeners(block) {
      const editBtn = block.querySelector('.tooltip-btn.edit');
      const cancelBtn = block.querySelector('.tooltip-btn.cancel');
      editBtn.addEventListener('click', () => {
        const patient = block.textContent.split(' – ')[0];
        alert(`Modify date for ${patient}'s appointment. (Placeholder action)`);
      });
      cancelBtn.addEventListener('click', () => {
        const patient = block.textContent.split(' – ')[0];
        if (confirm(`Are you sure you want to cancel ${patient}'s appointment?`)) {
          block.remove();
          updatePatientAppointments(patient, 'rejected');
          renderPatientsTable();
        }
      });
    }

    let currentPage = 1;
    const patientsPerPage = 5;
    let sortDirection = 'desc';
    let filteredPatients = [...patients];

    function renderPatientsTable() {
      const searchQuery = document.querySelector('.search-bar').value.toLowerCase();
      filteredPatients = patients.filter(patient => patient.name.toLowerCase().includes(searchQuery));

      filteredPatients.sort((a, b) => {
        const aHasPending = hasPendingAppointments(a.name);
        const bHasPending = hasPendingAppointments(b.name);
        return sortDirection === 'desc' ? (bHasPending - aHasPending) : (aHasPending - bHasPending);
      });

      const start = (currentPage - 1) * patientsPerPage;
      const end = start + patientsPerPage;
      const paginatedPatients = filteredPatients.slice(start, end);

      const tableBody = document.getElementById('patientsTableBody');
      tableBody.innerHTML = '';

      paginatedPatients.forEach(patient => {
        const appointments = getPatientAppointments(patient.name);
        const hasPending = hasPendingAppointments(patient.name);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${patient.name}</td>
          <td>${patient.email}</td>
          <td>${patient.phone}</td>
          <td>${appointments.length}</td>
          <td><i data-lucide="${hasPending ? 'check' : 'x'}" class="w-5 h-5 ${hasPending ? 'text-green-500' : 'text-red-500'}"></i></td>
          <td><button class="toggle-appointments-btn">Show Appointments</button></td>
        `;
        const appointmentsRow = document.createElement('tr');
        const appointmentsCell = document.createElement('td');
        appointmentsCell.colSpan = 6;
        const appointmentsList = document.createElement('div');
        appointmentsList.className = 'appointments-list';
        appointments.forEach(appointment => {
          const status = appointment.accepted === true ? 'Accepted' : appointment.accepted === false ? 'Pending' : 'Rejected';
          const appointmentItem = document.createElement('div');
          appointmentItem.className = 'appointment-item';
          appointmentItem.innerHTML = `
            <span>${appointment.time} – ${appointment.reason} (${status})</span>
            ${appointment.accepted === false ? `
              <div class="appointment-actions">
                <button class="appointment-btn accept" data-patient="${patient.name}" data-time="${appointment.time}">Accept</button>
                <button class="appointment-btn reject" data-patient="${patient.name}" data-time="${appointment.time}">Reject</button>
              </div>
            ` : ''}
          `;
          appointmentsList.appendChild(appointmentItem);
        });
        appointmentsCell.appendChild(appointmentsList);
        appointmentsRow.appendChild(appointmentsCell);
        tableBody.appendChild(row);
        tableBody.appendChild(appointmentsRow);

        const toggleBtn = row.querySelector('.toggle-appointments-btn');
        toggleBtn.addEventListener('click', () => {
          const isVisible = appointmentsList.classList.contains('visible');
          appointmentsList.classList.toggle('visible', !isVisible);
          toggleBtn.textContent = isVisible ? 'Show Appointments' : 'Hide Appointments';
        });

        appointmentsList.querySelectorAll('.appointment-btn.accept').forEach(btn => {
          btn.addEventListener('click', () => {
            updatePatientAppointment(btn.dataset.patient, btn.dataset.time, true);
            renderPatientsTable();
          });
        });

        appointmentsList.querySelectorAll('.appointment-btn.reject').forEach(btn => {
          btn.addEventListener('click', () => {
            if (confirm(`Are you sure you want to reject ${btn.dataset.patient}'s appointment at ${btn.dataset.time}?`)) {
              updatePatientAppointment(btn.dataset.patient, btn.dataset.time, 'rejected');
              renderPatientsTable();
            }
          });
        });
      });

      lucide.createIcons();
      renderPagination();
    }

    function getPatientAppointments(patientName) {
      const appointments = [];
      Object.values(schedule).forEach(day => {
        day.forEach(appointment => {
          if (appointment.patient === patientName && appointment.accepted !== 'rejected') {
            appointments.push(appointment);
          }
        });
      });
      return appointments;
    }

    function hasPendingAppointments(patientName) {
      return getPatientAppointments(patientName).some(appointment => appointment.accepted === false);
    }

    function updatePatientAppointment(patientName, time, status) {
      Object.values(schedule).forEach(day => {
        day.forEach(appointment => {
          if (appointment.patient === patientName && appointment.time === time) {
            appointment.accepted = status === true ? true : 'rejected';
          }
        });
      });
      updateScheduleView();
    }

    function updatePatientAppointments(patientName, status) {
      Object.values(schedule).forEach(day => {
        day.forEach(appointment => {
          if (appointment.patient === patientName) {
            appointment.accepted = status;
          }
        });
      });
      updateScheduleView();
    }

    function updateScheduleView() {
      document.querySelectorAll('.appointment-block').forEach(block => {
        const appointment = JSON.parse(block.dataset.appointment);
        if (appointment.accepted === 'rejected') {
          block.remove();
        } else if (toggleBtn.accepted === true) {
          block.classList.remove('not-accepted');
          const tooltip = block.querySelector('.tooltip');
          tooltip.innerHTML = `
            <p><strong>Patient:</strong> ${appointment.patient}</p>
            <p><strong>Reason:</strong> ${appointment.reason}</p>
            <p><strong>Phone:</strong> ${appointment.phone}</p>
            <p><strong>Notes:</strong> ${appointment.notes}</p>
            <div class="tooltip-buttons">
              <button class="tooltip-btn edit">Modify Date</button>
              <button class="tooltip-btn cancel">Cancel</button>
            </div>
          `;
          attachEditCancelListeners(block);
        }
      });
    }

    function renderPagination() {
      const pageCount = Math.ceil(filteredPatients.length / patientsPerPage);
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      for (let i = 1; i <= pageCount; i++) {
        const btn = document.createElement('button');
        btn.className = 'pagination-btn';
        btn.textContent = i;
        if (i === currentPage) btn.classList.add('active');
        btn.addEventListener('click', () => {
          currentPage = i;
          renderPatientsTable();
        });
        pagination.appendChild(btn);
      }
    }

    document.querySelector('.search-bar').addEventListener('input', () => {
      currentPage = 1;
      renderPatientsTable();
    });

    document.getElementById('sortBtn').addEventListener('click', () => {
      sortDirection = sortDirection === 'desc' ? 'asc' : 'desc';
      document.getElementById('sortBtn').textContent = `Sort by Pending Status (${sortDirection === 'desc' ? '↓' : '↑'})`;
      renderPatientsTable();
    });

    renderPatientsTable();
  </script>
</body>
</html>